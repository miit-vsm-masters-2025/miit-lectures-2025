# Лекция 3

- VirtualBox. Как это работает.
  - Нужно включить аппаратное ускорение (UEFI/BIOS)
    - Лирическое отступление: UEFI vs BIOS, MBR vs GPT, загрузка ОС в UEFI.
  - Доступ к сети через NAT, проброс портов
  - Виртуальный диск
- Создаем виртуальную машину
- Устанавливаем Ubuntu Server
- Знакомимся с bash, sudo, apt
- Ставим openssh-server, пробрасываем 22 порт на хостовую машину
- Логинимся по ssh с паролем
- Генерируем ssh-ключи на хостовой ОС (винда нынче тоже умеет и в ssh, и в ssh-keygen)
- Прописываем ssh-ключ в .ssh/authorized_keys, убеждаемся что нас пускает
  - Лирическое отсутпление: про то, как работает авторизация по ключам. Асимметричное шифрование, ssh challenge и его подписание приватным ключом.
- Безопасность: отключение входа по паролю после настройки входа по ключам.
  - Лирическое отступление: sshd-логи с реального сервера, тысячи попыток подключений по ssh со всякими дефолтными и слитыми паролями.
- Установка docker и docker-compose. Convenience script: https://get.docker.com/
- Caddy (веб-сервер), его запуск в докер-контейнере
- Wireshark. Перехват пакетов http-соединения, смотрим на внутренности.
  - Лирическое отступление: модель OSI, Ethernet, IP, TCP/UDP.
- Не успели, перенеслось на следующую лекцию:
  - TLS-сертфиикаты. XCA (https://www.hohnstaedt.de/xca/) для удобного управления tls-сертами.
  - Настройка серверного сертификата в Caddy. Проверка, что в браузере все работает.
  - Клиентская аутентификация по tls-сертификатам (mTLS).
  - На будущее: докер-демон может слушать на tcp-сокете с аутентификацией по tls-сертификатам. Это может быть очень 
  - удобно для управления контейнерами на удаленном сервере, чтобы не таскать файлы (типа docker-compose.yml и пр.) rsync'ом.
