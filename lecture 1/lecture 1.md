# Лекция 1

## План

- Знакомство, рассказ о себе
  - 26 лет
  - 11 лет программирую, в основном на Java, но еще на Python, Golang и Rust
  - Успел поработать и в маленьких стартапах, и побыть solution-архитектором в ВТБ 
  - Последние три года работаю в платформенной команде VK Video
    - Используем Java. Ни одной реляционной БД. Много самописных технологий, потому что опенсорсные решения не справляются.
  - С вами на парах будем использовать Python, т.к. он большинству из вас уже знаком, и в целом достаточно хорошо подходит для быстрого написания прототипов. А именно это нам и нужно: мы хотим потрогать как можно большее количество технологий, минимально отвлекаясь на специфику языка.
- Чем предстоит заниматься в этом семестре
  - Задача магистратуры — не дать какой-то конкретный стек технологий, а познакомить со сложными материями
  - Тем не менее невозможно стать архитектором, не представляя как нарисованная вами архитектура превращается в реальность.
  - Поэтому в этом семестре мы попробуем с вами познакомиться с тем, какие технологии бывают и что у них под капотом.
  - Вопросы проектирования систем, в том числе высоконагруженных и распределенных, остаются на второй семестр. Но какие-то моменты мы будем затрагивать на базовом уровне. 
- План семестра
  - Пары по вторникам и субботам.
  - По вторникам две пары, на них будет больше теории.
  - По субботам - больше практики. В планах - попробовать набросать три относительно приближенных к реальной жизни проекта.
  - Вы — первый поток, во многом экспериментальный. Устоявшихся методичек нет, местами будем импровизировать.
- Мне бы хотелось, чтобы наши занятия были более интерактивными.
  - Основная задача - дать вам некоторую картину мира, а не заставить вызубрить кучу бесполезных фактов (которые легко гуглятся или выдаются LLM).
- Вводный опрос. Дать ребятам кратко рассказать о своем опыте на аудиторию.
  - Кто писал на Python?
  - Кто писал на других языках?
    - Java, Go, Rust, JavaScript/TypeScript
  - Фронтенд? Бэкенд?
  - Какой был опыт с линуксом, докером, кубером?
  - Ставил ли кто-то десктопный линукс?
- Что мы знаем про Python?
  - Интерпретируемый
    - Кто может объяснить, что это значит? 
      - Что такое компиляция?
      - Что такое байткод? Используется ли он в питоне?
  - Динамическая типизация
    - Type annotations в последних версиях сильно эволюционировал, но все равно типы не проверяются на этапе компиляции и в рантайме могут отличаться.
    - **Пример**: Python: динамическая типизация и аннотации не гарантируют проверку типов
  - GIL и ограничения по многопоточке
    - GIL не позволяет нескольким потокам работать одновременно в Python
      - **Пример**: Python: GIL и многопоточность
      - Зачем это было нужно авторам языка? Что дало?
      - Как тогда питон активно используется в областях типа ML, где нужны быстрые вычисления?
    - Сильно полагается на нативные библиотеки, которые очень быстрые
      - numpy, pandas, pytorch и прочий дата-саенс
    - Активно идет в сторону использования реактивного программирования. Asyncio.
      - **Пример**: Python: asyncio
      - Кто может рассказать, в чем отличие реактивного программирования от более классического подхода?
- Какие еще языки популярны на бэкенде и что вы про них знаете?
  - Java
    - Стара как мир и очень популярна в банковском секторе и прочих корпорациях.
    - Вопреки мемам, Java очень быстрая.
      - Компиляция в байткод, JIT-компиляция
      - И еще умеет компилироваться AOT.
    - Код, написанный на джаве, практически не ломается с годами и десятилетиями.
      - Нативные библиотеки используются исключительно редко, чаще всего все библиотеки пишутся прямо на Java. И это очень удобно: всегда можно заглянуть "под капот".
  - Golang
    - Молодой и борзый язык, пытающийся активно захватывать энтерпрайз
    - Простой синтаксис. На мой вкус — даже слишком простой и ограниченный. Но в больших и старых кодовых в этом может быть плюс.
    - Встроенная реактивность. Потоков нет, есть горутины, и они часть языка с первого дня.
      - Из-за этого язык достаточно популярен на бэкенде, где довольно много сетевых взаимодействий и ожидания.
      - **Пример**: Go: «встроенная реактивность» — горутины и каналы
    - Компиляция в статические бинарники.
      - Позволяет писать на нем инфраструктурные штуки и без боли запускать их в любых окружениях.
        - Например на нем написаны Docker, Kubernetes, etcd, Caddy, Prometheus
  - C++ и C
    - Легендарная штука для самых низкоуровневых и критичных задач.
    - Максимально близок к "железу". Компилируется в машинный код, позволяет самые низкоуровневые взаимодействия с аппаратными штуками.
    - Миллион способов выстрелить себе в ногу, но если уметь правильно готовить - то все отлично
      - Некоторые компании, типа Яндекса, пишут на нем продукты целиком
    - Зачастую используется в комбинации с более высокоуровневым языком программирования
      - Я уже упоминал, что многие питоновские библиотеки – просто биндинги над C/C++ либами
  - Rust
    - Очень производительный, эффективный и надежный. Но сложный в разработке.
      - Главная фишка - компилятор позволяет на этапе сборки отследить время жизни всех объектов, и не тратить в рантайме ресурсы на отслеживание мусора. Более подробно поговорим об этом ниже.
    - Пока мало популярен в России, но уже проникает в некоторые наиболее критичные области.
      - Например я слышал, что карточный процессинг в Т-Банке переписывали на Rust
      - Еще на нем пишут много инфраструктурных вещей, драйвера и даже части ядра Linux.
- Управление памятью
  - Ручное управление (C/C++)
    - **Пример**: C: ручное управление памятью, пример «выстрела в ногу» (use-after-free)
    - В C++ есть опциональные инструменты для управления памятью:
      - RAII и смарт-пойнтеры - по сути подсчет ссылок
      - Есть сторонние GC, но они не часть языка
  - Reference counting
    - Основная техника сборки мусора в Python
    - Кто может сказать, какие у нее есть проблемы?
      - А что если есть циклические ссылки?
        - Поэтому в Python помимо Reference counting используется еще и GC.
  - Garbage collection (Java)
    - GC - всегда оверхед. Но в многопоточных средах часто быстрее RC.
      - В Python RC основной способ сборки мусора, т.к. исторически есть GIL. 
        - И собственно из-за RC так тяжело отказаться от GIL.
    - Как проходит сборка мусора: GC Roots, Mark-Sweep, Copying, Compacting.
    - Слабая гипотеза о поколениях.
    - Количество генерируемого мусора — влияет на производительность
  - Экспериментальные техники управления памятью: Rust.
    - TODO: Примеры кода на Rust с демонстрацией borrow checker и кросс-потоковой передачи ссылок.
    - Компилятор отслеживает сроки жизни объектов и их передачу между потоками.
    - Но дается это слишком сложным синтаксисом с большим количеством ограничений, что замедляет разработку и требует высокого уровня от программистов.
- Микросервисы. Почему конкретный язык программирования уже не так важен в современном мире.
  - Микросервисы могут быть написаны на разных языках и спокойно жить в одной инфраструктуре. В случае необходимости можно достаточно быстро переписать микросервис целиком, даже на другой язык.
  - Сетевое взаимодействие. REST, gRPC.
  - Облака, kubernetes, автоскейлинг.
- Что подготовить к следующей неделе
  - Я буду использовать Pycharm, но вы можете использовать VSCode или любой другой инструментарий (но я не могу обещать, что смогу вам помочь с настройкой).
    - В идеале - pro-версию. Можно попробовать получить студенческую лицензию через Github Student Pack. А еще можно подойти ко мне после пар.
  - Git и Github. Убедитесь, что у вас есть акканут на гитхабе и вы используете ssh-ключ для push/pull.
  - uv - пакетный менеджер для Python. Он скрывает под собой логику работы с pip и virtualenv, а еще очень быстрый.
  - Python 3.13 в uv virtualenv.
  - Docker Desktop
- Что почитать
  - Краткосрочно — что-то по Python и FastAPI.
    - Про Python — могу рекомендовать https://learnxinyminutes.com/python/.
    - Про FastAPI — официальная дока хороша: https://fastapi.tiangolo.com/
  - Долгосрочно могу порекомендовать книгу Designing Data-Intensive Applications Мартина Клеппмана
    - Она нам пригодится больше во втором семестре, но уже сейчас может добавить больше понимания происходящему.
    - Есть перевод на русский: https://www.piter.com/collection/bestsellery-oreilly/product/vysokonagruzhennye-prilozheniya-programmirovanie-masshtabirovanie-podderzhka-2
    - В качестве источника книг могу порекомендовать LibGen. https://libgen.li/
- Про использование LLM
  - С LLM есть две большие проблемы
    - Они умеют очень убедительно галлюцинировать, создавая ложную иллюзию понимания
      - Их можно использовать как быстрый способ найти какую-то информацию, но прежде, чем принимать на ее основе решения, — нужно пойти и перепроверить все.
    - Велик соблазн свалить всю работу на LLM
      - Увы, но это не работает на любых нетривиальных задачах
      - При этом вы фактически не учитесь ничему новому, по крайней мере если не будете реально разбираться в том, что модель сгенерировала.
      - А еще это очень заметно
  - В целом мы все взрослые люди и понимаем, что запрещать LLM бессмысленно и глупо. Так что просто используйте их правильно.